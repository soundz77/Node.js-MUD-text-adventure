<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adventure</title>

    <meta
      http-equiv="Content-Security-Policy"
      content="
        default-src 'self';
        script-src 'self' https://cdn.socket.io;
        style-src 'self' 'unsafe-inline';
        connect-src 'self' ws: wss:;
      "
    />

    <link rel="stylesheet" type="text/css" href="/style.css" />
  </head>
  <body data-player-name="<%= player.name %>">
    <div class="container">
      <div class="navbar">
        <h1>Welcome <%= player.name %>!</h1>
        <p>
          A level <span id="level"><%= player.stats.level %></span>
          <%= player.class %>. Good luck on your journey!
        </p>
      </div>

      <div class="content">
        <div class="left-sidebar">
          <h2>Player Stats</h2>
          <div class="stats">
            <h3>Basic stats</h3>
            <div class="stat">
              <span class="stat-label">Health:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="health-bar"
                  style="width: <%= player.stats.health %>%"
                ></div>
              </div>
              <span id="health"><%= player.stats.health %></span>
            </div>

            <div class="stat">
              <span class="stat-label">Stamina:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="stamina-bar"
                  style="width: <%= player.stats.stamina %>%"
                ></div>
              </div>
              <span id="stamina"><%= player.stats.stamina %></span>
            </div>
            <h3>Primary stats</h3>
            <div class="stat">
              <span class="stat-label">Strength:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="strength-bar"
                  style="width: <%= player.stats.strength %>%"
                ></div>
              </div>
              <span id="strength"><%= player.stats.strength %></span>
            </div>

            <h3>Secondary stats</h3>
            <div class="stat">
              <span class="stat-label">Defence:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="defence-bar"
                  style="width: <%= player.stats.defence %>%"
                ></div>
              </div>
              <span id="defence"><%= player.stats.defence %></span>
            </div>

            <div class="stat">
              <span class="stat-label">Attack:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="attack-bar"
                  style="width: <%= player.stats.attack %>%"
                ></div>
              </div>
              <span id="attack"><%= player.stats.attack %></span>
            </div>

            <div class="stat">
              <span class="stat-label">Experience:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="experience-bar"
                  style="width: <%= player.stats.experience %>%"
                ></div>
              </div>
              <span id="experience"><%= player.stats.experience %></span>
            </div>
          </div>

          <h2 id="inventory-list">
            <% if (player.inventory) { %> Your inventory: <%= player.inventory
            %> <% } %>
          </h2>
        </div>

        <div class="main-content">
          <div class="left-column">
            <p>You are here:</p>
            <h2 id="name">
              <% if (location && location.name) { %> <%= location.name %> <% }
              %>
            </h2>
            <h3 id="description">
              <% if (location && location.description) { %> <%=
              location.description %> <% } %>
            </h3>

            <h2 id="players">
              <% if (location && location.players) { %> Players: <%=
              location.players %> <% } %>
            </h2>
            <h2 id="locationExits">
              <% if (location && location.exits) { %> Exits: <%= location.exits
              %> <% } %>
            </h2>

            <h2 id="creatures">
              <% if (location && location.creatures && location.creatures.length
              > 0) { %> Monsters: <%= location.creatures %> <% } %>
            </h2>

            <h2 id="artifacts">
              <% if (location && location.artifacts && location.artifacts.length
              > 0) { %> Artifacts: <%= location.artifacts %> <% } %>
            </h2>

            <form id="command-form">
              <label for="command">Enter command:</label>
              <input type="text" id="command" name="command" required />
              <button type="submit">Submit</button>
            </form>

            <div>
              <h2 id="message"></h2>

              <% if (location && location.message) { %> <%= location.message %>
              <% } %>
            </div>
          </div>

          <div class="right-column">
            <!-- World Chat box -->
            <div id="world-chat" class="panel">
              <h3>World Chat</h3>
              <ul id="world-messages"></ul>
              <form id="chat-form">
                <input id="chat-form" autocomplete="off" />
                <button>Send</button>
              </form>
            </div>

            <div class="panel">
              <h2>Kills:</h2>
              <div id="kills"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Socket.IO library (CDN) -->
    <script
      src="https://cdn.socket.io/4.8.1/socket.io.min.js"
      crossorigin="anonymous"
    ></script>
    <!-- Your client bundle -->
    <script src="/js/client.js"></script>
  </body>
</html>
