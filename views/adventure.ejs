<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adventure</title>

    <meta
      http-equiv="Content-Security-Policy"
      content="
  default-src 'self';
  script-src 'self' https://cdn.socket.io;
  style-src 'self' 'unsafe-inline';
  connect-src 'self' ws: wss:;
"
    />

    <link rel="stylesheet" type="text/css" href="/style.css" />
  </head>
  <body
    data-player-name="<%= player.name %>"
    data-room-id="<%= location && location.id %>"
  >
    <div class="container">
      <div class="navbar">
        <h1>Welcome <%= player.name %>!</h1>
        <p>
          A level <span id="level"><%= player.stats.level %></span>
          <%= player.class %>. Good luck on your journey!
        </p>
      </div>

      <div class="content">
        <div class="left-sidebar">
          <h2>Player Stats</h2>
          <div class="stats">
            <h3>Basic stats</h3>

            <div class="stat">
              <span class="stat-label">Health:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="healthBar"
                  data-initial="<%= player.stats.health %>"
                  style="width: <%= player.stats.health %>%"
                ></div>
              </div>
              <span id="health"><%= player.stats.health %></span>
            </div>

            <div class="stat">
              <span class="stat-label">Stamina:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="staminaBar"
                  data-initial="<%= player.stats.stamina %>"
                  style="width: <%= player.stats.stamina %>%"
                ></div>
              </div>
              <span id="stamina"><%= player.stats.stamina %></span>
            </div>

            <h3>Primary stats</h3>
            <div class="stat">
              <span class="stat-label">Strength:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="strengthBar"
                  data-initial="<%= player.stats.strength %>"
                  style="width: <%= player.stats.strength %>%"
                ></div>
              </div>
              <span id="strength"><%= player.stats.strength %></span>
            </div>

            <h3>Secondary stats</h3>
            <div class="stat">
              <span class="stat-label">Defence:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="defenceBar"
                  data-initial="<%= player.stats.defence %>"
                  style="width: <%= player.stats.defence %>%"
                ></div>
              </div>
              <span id="defence"><%= player.stats.defence %></span>
            </div>

            <div class="stat">
              <span class="stat-label">Attack:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="attackBar"
                  data-initial="<%= player.stats.attack %>"
                  style="width: <%= player.stats.attack %>%"
                ></div>
              </div>
              <span id="attack"><%= player.stats.attack %></span>
            </div>

            <div class="stat">
              <span class="stat-label">Experience:</span>
              <div class="stat-bar">
                <div
                  class="stat-bar-inner"
                  id="experienceBar"
                  data-initial="<%= player.stats.experience %>"
                  style="width: <%= player.stats.experience %>%"
                ></div>
              </div>
              <span id="experience"><%= player.stats.experience %></span>
            </div>
          </div>

          <h2 id="inventory">
            <% if (player.inventory) { %> Your inventory: <%= player.inventory
            %> <% } %>
          </h2>
        </div>

        <div class="main-content">
          <div class="left-column">
            <h2 id="name"></h2>
            <h3 id="description"></h3>
            <h2 id="players"></h2>
            <h2 id="exits"></h2>
            <h2 id="creatures"></h2>
            <h2 id="artifacts"></h2>

            <form id="commandForm">
              <label for="command">Enter command:</label>
              <input type="text" id="command" name="command" required />
              <button type="submit">Submit</button>
            </form>

            <div>
              <!-- Command reply / headline -->
              <h2 id="message"></h2>
              <% if (location && location.message) { %> <%= location.message %>
              <% } %>
            </div>

            <div class="panel">
              <h3>Room events</h3>
              <ul id="roomEvents"></ul>
            </div>
          </div>

          <div class="right-column">
            <!-- Room Chat box (players in the same room) -->
            <div id="roomChat" class="panel">
              <h3>Room chat</h3>
              <ul id="roomMessages"></ul>
              <form id="chatForm">
                <input id="chatInput" autocomplete="off" />
                <button>Send</button>
              </form>
            </div>

            <!-- World Chat box (optional â€” admin/global) -->
            <div id="worldChat" class="panel">
              <h3>World chat</h3>
              <ul id="worldMessages"></ul>
              <form id="worldForm">
                <input id="worldInput" autocomplete="off" />
                <button>Send</button>
              </form>
            </div>

            <div class="panel">
              <h2>Kills:</h2>
              <div id="kills"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.socket.io/4.7.5/socket.io.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="/js/client.js" defer></script>
  </body>
</html>
